{"status": "published", "definition": {"states": [{"transitions": [{"event": "incomingMessage"}, {"event": "incomingCall", "next": "SetMessages"}, {"event": "incomingRequest"}], "type": "trigger", "name": "Trigger", "properties": {"offset": {"y": 0, "x": 0}}}, {"transitions": [{"event": "next", "next": "Greeting"}], "type": "set-variables", "name": "SetMessages", "properties": {"variables": [{"key": "greetingMessage", "value": "Hi welcome to Maine Health"}, {"key": "firstNameQuestion", "value": "Please say your first name, then press pound after you are done."}, {"key": "lastNameQuestion", "value": "Please say your last name, then press pound after you are done."}, {"key": "dateOfBirthYearQuestion", "value": "Please type your 4 digit birth year on your dial pad, and hit the pound symbol. If your birth year was 1947, you would type 1 9 4 7 pound."}, {"key": "dateOfBirthMonthQuestion", "value": "Please enter the month you were born. For example, July would be 07, and please hit pound at the end."}, {"key": "dateOfBirthDateQuestion", "value": "Please type your day of birth on your dial pad, and hit pound at the end."}, {"key": "phoneNumberQuestion", "value": "Please type your phone number from your dial pad."}, {"key": "goodByeMessage", "value": "Thank you for calling. Goodbye"}, {"key": "endingMessage", "value": "Is there anyone else in your household that needs to pre register? Push 1 for yes, or push 2 for no."}, {"key": "thankyouMessage", "value": "Thank you, you have registered for the vaccine. Goodbye."}, {"key": "newPhoneNumberQuestion", "value": "Please type your new phone number and press pound to confirm the new phone number."}, {"key": "testScript", "value": "true"}], "offset": {"y": 190, "x": 140}}}, {"transitions": [{"event": "keypress", "next": "GatherFirstName"}, {"event": "speech", "next": "setFirstName"}, {"event": "timeout", "next": "GatherFirstName"}], "type": "gather-input-on-call", "name": "GatherFirstName", "properties": {"stop_gather": true, "language": "en-US", "gather_language": "en", "say": "{{flow.variables.firstNameQuestion}}", "loop": 1, "timeout": 7, "offset": {"y": 2050, "x": 330}, "voice": "Polly.Matthew", "speech_timeout": "auto", "finish_on_key": "#", "profanity_filter": "true"}}, {"transitions": [{"event": "audioComplete", "next": "GatherYearBirth"}], "type": "say-play", "name": "Greeting", "properties": {"play": "https://storage.googleapis.com/carousel-blade-mms-media/MGH%20Vaccine%20IVR%20Recording%20Greeting%201.mp3", "loop": 1, "offset": {"y": 380, "x": 140}}}, {"transitions": [{"event": "next", "next": "GatherLastName"}], "type": "set-variables", "name": "setFirstName", "properties": {"variables": [{"key": "firstName", "value": "{{widgets.GatherFirstName.SpeechResult}}"}], "offset": {"y": 2330, "x": 380}}}, {"transitions": [{"event": "keypress", "next": "GatherLastName"}, {"event": "speech", "next": "setLastName"}, {"event": "timeout", "next": "GatherLastName"}], "type": "gather-input-on-call", "name": "GatherLastName", "properties": {"stop_gather": true, "language": "en-US", "gather_language": "en", "say": "{{flow.variables.lastNameQuestion}}", "loop": 1, "timeout": 7, "offset": {"y": 2550, "x": 390}, "voice": "Polly.Matthew", "speech_timeout": "auto", "finish_on_key": "#", "profanity_filter": "true"}}, {"transitions": [{"event": "next", "next": "setPhoneNumber"}], "type": "set-variables", "name": "setLastName", "properties": {"variables": [{"key": "lastName", "value": "{{widgets.GatherLastName.SpeechResult}}"}], "offset": {"y": 2820, "x": 420}}}, {"transitions": [{"event": "keypress", "next": "YearCheck"}, {"event": "speech"}, {"event": "timeout", "next": "GatherYearBirth"}], "type": "gather-input-on-call", "name": "GatherYearBirth", "properties": {"stop_gather": true, "language": "en-US", "gather_language": "en", "say": "{{flow.variables.dateOfBirthYearQuestion}}", "loop": 1, "timeout": 7, "offset": {"y": 580, "x": 140}, "voice": "Polly.Matthew", "speech_timeout": "auto", "finish_on_key": "#", "profanity_filter": "true"}}, {"transitions": [{"event": "keypress", "next": "MonthCheck"}, {"event": "speech"}, {"event": "timeout", "next": "GatherMonthBirth"}], "type": "gather-input-on-call", "name": "GatherMonthBirth", "properties": {"stop_gather": true, "language": "en-US", "gather_language": "en", "say": "{{flow.variables.dateOfBirthMonthQuestion}}", "loop": 1, "timeout": 7, "offset": {"y": 1070, "x": 380}, "voice": "Polly.Matthew", "speech_timeout": "auto", "finish_on_key": "#", "profanity_filter": "true"}}, {"transitions": [{"event": "keypress", "next": "DateCheck"}, {"event": "speech"}, {"event": "timeout", "next": "GatherDateBirth"}], "type": "gather-input-on-call", "name": "GatherDateBirth", "properties": {"stop_gather": true, "language": "en-US", "gather_language": "en", "say": "{{flow.variables.dateOfBirthDateQuestion}}", "loop": 1, "timeout": 7, "offset": {"y": 1550, "x": 410}, "voice": "Polly.Matthew", "speech_timeout": "auto", "finish_on_key": "#", "profanity_filter": "true"}}, {"transitions": [{"event": "success", "next": "EndingMessage"}, {"event": "failed", "next": "EndingMessage"}], "type": "make-http-request", "name": "callApi", "properties": {"url": "https://capture-data-9326.twil.io/capture", "parameters": [{"key": "firstName", "value": "{{widgets.GatherFirstName.SpeechResult}}"}, {"key": "lastName", "value": "{{widgets.GatherLastName.SpeechResult}}"}, {"key": "phoneNumber", "value": "{{flow.variables.contactPhoneNumber}}"}, {"key": "dateOfBirthMonth", "value": "{{widgets.GatherMonthBirth.Digits}}"}, {"key": "dateOfBirthDay", "value": "{{widgets.GatherDateBirth.Digits}}"}, {"key": "dateOfBirthYear", "value": "{{widgets.GatherYearBirth.Digits}}"}], "method": "POST", "content_type": "application/x-www-form-urlencoded;charset=utf-8", "offset": {"y": 3140, "x": 450}}}, {"transitions": [{"event": "audioComplete"}], "type": "say-play", "name": "Thankyou", "properties": {"play": "https://00f74ba44bc6cf07afc59363965fa2ce1670296a1b-apidata.googleusercontent.com/download/storage/v1/b/audio-maine-general/o/MGH%20Vaccine%20IVR%20Recording%20Greeting%202%20(1).mp3?jk=AFshE3WeszvV7QMiUstuY3IZWTHpq4Ean3-u_w2ObPrE17qf8bcI99YAR81vtb-84tADYzbNY-b0_d5-_qG1JFA7mnNg8OLZQrUcwNAHZJAF39MTWmxcE-vU4mnainp2KWcwUc3j6JJ15sWbdsOdGzlIs_zsmBDzz9JQpPLGmdKbyq7JwxVqjkPyujEfX_CBB-wqwS8yHHiOPhGi9ALFF89DkseNQVO5RIVvtzC-UuMaFFqqS3f2WYC4etG1VEeZS8H_7LVCe5cdrICHZqqif6GatzpkcO5plWo4wgkvoL7agBrkGSehk4o_ilBq7UGAZWN6i6tBLbp_GegNORNO2ipVJDaeCVD7E-ssT2Xu2nTgYA258j_gnwzFBuGmK1sYCuoMP9gQTYIGWRmQFOP8iPn2jS1y_a-VbYh0QYUc6bG3pSY8vJhLoQNRio5w_dZerEv82AqP2QqTEZVBYcCQds2Cs-nX3rvWMSWk7ZpD_HKUbhHcPp8scyIC1fDTneaTtfyhwqoXalAyRP4anvKHv9ioE2AjSPYCGairVugdHA_NNkso3VYNIDikhZ6e03NG2rtIE7cFJzVfhwwfyzACdtemJoZcuNe_Q5qBygmrNGnp-5F99RKFfq3i7ZHgcULffoe4m_3ylZcbwnRfCH2BK4D7crm8vLMDmmSYvm5MaRCYZZFNQYa6A7qqxljgk3jNOxmvs1alRqQMzjHxo2NlBUlYwL7f9ieqOf-SUDAh1U2npdw6WKKnKFMOZrd50HpFd0RdiiSUaVO28g-yDD6vts5OEKwiqWgm7qbKnRXdGkZYDPuX9BD91duBwFz2yDNMziW0E62uzZOW6vYCq-Oj5sZajOnbN-xl0mCTUEQv2iAA39eDVp27X5beyBkceJB8xSJkCaqKsUoNOyShjKIP364Mj617lfDglwGua6BauY7K61jzUdZh1k5Ye-oEz9Slh-ujXi90wy_NvLvfod_1-bGgIe1B3as&isca=1", "voice": "Polly.Matthew", "language": "en-US", "loop": 1, "offset": {"y": 4230, "x": 710}}}, {"transitions": [{"event": "noMatch", "next": "GatherMonthBirth"}, {"conditions": [{"type": "regex", "friendly_name": "If value 09-12", "arguments": ["{{widgets.GatherMonthBirth.Digits}}"], "value": "^(0[1-9]|1[012])$"}], "event": "match", "next": "setMonthNormalDigit"}, {"conditions": [{"type": "regex", "friendly_name": "If value regex ^([1-9]|1[012])$", "arguments": ["{{widgets.GatherMonthBirth.Digits}}"], "value": "^([1-9]|1[012])$"}], "event": "match", "next": "setMonthSingleDigit"}], "type": "split-based-on", "name": "MonthCheck", "properties": {"input": "{{widgets.GatherMonthBirth.Digits}}", "offset": {"y": 1290, "x": 380}}}, {"transitions": [{"event": "noMatch", "next": "GatherDateBirth"}, {"conditions": [{"type": "regex", "friendly_name": "If value regex ^(0?[1-9]|1[0-9]|2[0-9]|3[01])$", "arguments": ["{{widgets.GatherDateBirth.Digits}}"], "value": "^(0?[1-9]|1[0-9]|2[0-9]|3[01])$"}], "event": "match", "next": "checkBorn1952"}], "type": "split-based-on", "name": "DateCheck", "properties": {"input": "{{widgets.GatherDateBirth.Digits}}", "offset": {"y": 1790, "x": 310}}}, {"transitions": [{"event": "noMatch", "next": "InvalidYear"}, {"conditions": [{"type": "less_than", "friendly_name": "If value less_than 1952", "arguments": ["{{widgets.GatherYearBirth.Digits}}"], "value": "1952"}], "event": "match", "next": "ValidYearCheck"}, {"conditions": [{"type": "equal_to", "friendly_name": "If value equal_to 1952", "arguments": ["{{widgets.GatherYearBirth.Digits}}"], "value": "1952"}], "event": "match", "next": "setBorn1952"}, {"conditions": [{"type": "greater_than", "friendly_name": "If over 4 digits", "arguments": ["{{widgets.GatherYearBirth.Digits}}"], "value": "9999"}], "event": "match", "next": "GatherYearBirth"}, {"conditions": [{"type": "less_than", "friendly_name": "less than 4 digits", "arguments": ["{{widgets.GatherYearBirth.Digits}}"], "value": "1000"}], "event": "match", "next": "GatherYearBirth"}], "type": "split-based-on", "name": "YearCheck", "properties": {"input": "{{widgets.GatherYearBirth.Digits}}", "offset": {"y": 830, "x": 110}}}, {"transitions": [{"event": "audioComplete", "next": "HouseholdPreregister"}], "type": "say-play", "name": "InvalidYear", "properties": {"play": "https://storage.googleapis.com/maine_project_ivr/New%20Recording%205%20(1).mp3", "loop": 1, "offset": {"y": 1070, "x": -30}}}, {"transitions": [{"event": "keypress", "next": "HouseholdPreregisterCheck"}, {"event": "speech"}, {"event": "timeout", "next": "HouseholdPreregister"}], "type": "gather-input-on-call", "name": "HouseholdPreregister", "properties": {"stop_gather": true, "language": "en-US", "gather_language": "en", "say": "Is there anyone else in your household that needs to pre register? Push 1 for yes, or push 2 for no.", "number_of_digits": 1, "loop": 1, "timeout": 7, "offset": {"y": 1300, "x": -30}, "voice": "Polly.Matthew", "speech_timeout": "auto", "finish_on_key": "#", "profanity_filter": "true"}}, {"transitions": [{"event": "noMatch", "next": "Goodbye"}, {"conditions": [{"type": "equal_to", "friendly_name": "If value equal_to 1", "arguments": ["{{widgets.HouseholdPreregister.Digits}}"], "value": "1"}], "event": "match", "next": "Greeting"}], "type": "split-based-on", "name": "HouseholdPreregisterCheck", "properties": {"input": "{{widgets.HouseholdPreregister.Digits}}", "offset": {"y": 1500, "x": -570}}}, {"transitions": [{"event": "audioComplete"}], "type": "say-play", "name": "Goodbye", "properties": {"say": "{{flow.variables.goodByeMessage}}", "voice": "Polly.Matthew", "language": "en-US", "loop": 1, "offset": {"y": 1780, "x": -180}}}, {"transitions": [{"event": "noMatch", "next": "InvalidYear"}, {"conditions": [{"type": "equal_to", "friendly_name": "If value equal_to 01", "arguments": ["{{widgets.GatherMonthBirth.Digits}}"], "value": "01"}], "event": "match", "next": "MonthToText"}, {"conditions": [{"type": "equal_to", "friendly_name": "If value equal_to 02", "arguments": ["{{widgets.GatherMonthBirth.Digits}}"], "value": "02"}], "event": "match", "next": "MonthToText"}, {"conditions": [{"type": "equal_to", "friendly_name": "If value equal_to 03", "arguments": ["{{widgets.GatherMonthBirth.Digits}}"], "value": "03"}], "event": "match", "next": "DateYoungCheck"}], "type": "split-based-on", "name": "MonthYoungCheck", "properties": {"input": "{{widgets.GatherMonthBirth.Digits}}", "offset": {"y": 1760, "x": 1280}}}, {"transitions": [{"event": "noMatch", "next": "InvalidYear"}, {"conditions": [{"type": "equal_to", "friendly_name": "If value equal_to 01", "arguments": ["{{widgets.GatherDateBirth.Digits}}"], "value": "01"}], "event": "match", "next": "MonthToText"}], "type": "split-based-on", "name": "DateYoungCheck", "properties": {"input": "{{widgets.GatherDateBirth.Digits}}", "offset": {"y": 2180, "x": 1390}}}, {"transitions": [{"event": "next", "next": "GatherMonthBirth"}], "type": "set-variables", "name": "setBorn1952", "properties": {"variables": [{"key": "IsBorn1952", "value": "true"}], "offset": {"y": 851, "x": 841}}}, {"transitions": [{"event": "noMatch", "next": "MonthToText"}, {"conditions": [{"type": "equal_to", "friendly_name": "If value equal_to true", "arguments": ["{{flow.variables.isBorn1952}}"], "value": "true"}], "event": "match", "next": "MonthYoungCheck"}], "type": "split-based-on", "name": "checkBorn1952", "properties": {"input": "{{flow.variables.isBorn1952}}", "offset": {"y": 1430, "x": 1210}}}, {"transitions": [{"event": "keypress", "next": "CheckConfirmDOB"}, {"event": "speech"}, {"event": "timeout", "next": "ConfirmDOB"}], "type": "gather-input-on-call", "name": "ConfirmDOB", "properties": {"stop_gather": false, "language": "en-US", "gather_language": "en", "say": "Your date of birth is  \n{{flow.variables.monthText}} {{widgets.GatherDateBirth.Digits}} .\n{{widgets.GatherYearBirth.Digits}}. Press 1 to confirm.\nPress 2 to enter it again.", "number_of_digits": 1, "loop": 1, "timeout": 7, "offset": {"y": 2460, "x": 1370}, "voice": "Polly.Matthew", "speech_timeout": "auto", "finish_on_key": "#", "profanity_filter": "true"}}, {"transitions": [{"event": "noMatch"}, {"conditions": [{"type": "equal_to", "friendly_name": "If value equal_to 01", "arguments": ["{{flow.variables.inputMonth}}"], "value": "01"}], "event": "match", "next": "setJan"}, {"conditions": [{"type": "equal_to", "friendly_name": "If value equal_to 02", "arguments": ["{{flow.variables.inputMonth}}"], "value": "02"}], "event": "match", "next": "setFeb"}, {"conditions": [{"type": "equal_to", "friendly_name": "If value equal_to 03", "arguments": ["{{flow.variables.inputMonth}}"], "value": "03"}], "event": "match", "next": "setMar"}, {"conditions": [{"type": "equal_to", "friendly_name": "If value equal_to 04", "arguments": ["{{flow.variables.inputMonth}}"], "value": "04"}], "event": "match", "next": "setApr"}, {"conditions": [{"type": "equal_to", "friendly_name": "If value equal_to 05", "arguments": ["{{flow.variables.inputMonth}}"], "value": "05"}], "event": "match", "next": "setMay"}, {"conditions": [{"type": "equal_to", "friendly_name": "If value equal_to 06", "arguments": ["{{flow.variables.inputMonth}}"], "value": "06"}], "event": "match", "next": "setJune"}, {"conditions": [{"type": "equal_to", "friendly_name": "If value equal_to 07", "arguments": ["{{flow.variables.inputMonth}}"], "value": "07"}], "event": "match", "next": "setJuly"}, {"conditions": [{"type": "equal_to", "friendly_name": "If value equal_to 08", "arguments": ["{{flow.variables.inputMonth}}"], "value": "08"}], "event": "match", "next": "setAugust"}, {"conditions": [{"type": "equal_to", "friendly_name": "If value equal_to 09", "arguments": ["{{flow.variables.inputMonth}}"], "value": "09"}], "event": "match", "next": "setSeptember"}, {"conditions": [{"type": "equal_to", "friendly_name": "If value equal_to 10", "arguments": ["{{flow.variables.inputMonth}}"], "value": "10"}], "event": "match", "next": "setOctober"}, {"conditions": [{"type": "equal_to", "friendly_name": "If value equal_to 11", "arguments": ["{{flow.variables.inputMonth}}"], "value": "11"}], "event": "match", "next": "setNovember"}, {"conditions": [{"type": "equal_to", "friendly_name": "If value equal_to 12", "arguments": ["{{flow.variables.inputMonth}}"], "value": "12"}], "event": "match", "next": "setDecember"}], "type": "split-based-on", "name": "MonthToText", "properties": {"input": "{{flow.variables.inputMonth}}", "offset": {"y": 2190, "x": 1900}}}, {"transitions": [{"event": "next", "next": "ConfirmDOB"}], "type": "set-variables", "name": "setJan", "properties": {"variables": [{"key": "monthText", "value": "January"}], "offset": {"y": 2720, "x": 2060}}}, {"transitions": [{"event": "next", "next": "ConfirmDOB"}], "type": "set-variables", "name": "setFeb", "properties": {"variables": [{"key": "monthText", "value": "February"}], "offset": {"y": 2720, "x": 2410}}}, {"transitions": [{"event": "next", "next": "ConfirmDOB"}], "type": "set-variables", "name": "setMar", "properties": {"variables": [{"key": "monthText", "value": "March"}], "offset": {"y": 2720, "x": 2750}}}, {"transitions": [{"event": "next", "next": "ConfirmDOB"}], "type": "set-variables", "name": "setApr", "properties": {"variables": [{"key": "monthText", "value": "April"}], "offset": {"y": 2720, "x": 3090}}}, {"transitions": [{"event": "next", "next": "ConfirmDOB"}], "type": "set-variables", "name": "setMay", "properties": {"variables": [{"key": "monthText", "value": "May"}], "offset": {"y": 2990, "x": 2070}}}, {"transitions": [{"event": "next", "next": "ConfirmDOB"}], "type": "set-variables", "name": "setJune", "properties": {"variables": [{"key": "monthText", "value": "June"}], "offset": {"y": 2990, "x": 2420}}}, {"transitions": [{"event": "next", "next": "ConfirmDOB"}], "type": "set-variables", "name": "setJuly", "properties": {"variables": [{"key": "monthText", "value": "July"}], "offset": {"y": 2990, "x": 2760}}}, {"transitions": [{"event": "next", "next": "ConfirmDOB"}], "type": "set-variables", "name": "setAugust", "properties": {"variables": [{"key": "monthText", "value": "Augest"}], "offset": {"y": 2990, "x": 3100}}}, {"transitions": [{"event": "next", "next": "ConfirmDOB"}], "type": "set-variables", "name": "setSeptember", "properties": {"variables": [{"key": "monthText", "value": "September"}], "offset": {"y": 3250, "x": 2070}}}, {"transitions": [{"event": "next", "next": "ConfirmDOB"}], "type": "set-variables", "name": "setOctober", "properties": {"variables": [{"key": "monthText", "value": "October"}], "offset": {"y": 3250, "x": 2420}}}, {"transitions": [{"event": "next", "next": "ConfirmDOB"}], "type": "set-variables", "name": "setNovember", "properties": {"variables": [{"key": "monthText", "value": "November"}], "offset": {"y": 3250, "x": 2770}}}, {"transitions": [{"event": "next", "next": "ConfirmDOB"}], "type": "set-variables", "name": "setDecember", "properties": {"variables": [{"key": "monthText", "value": "December"}], "offset": {"y": 3250, "x": 3110}}}, {"transitions": [{"event": "noMatch", "next": "GatherYearBirth"}, {"conditions": [{"type": "equal_to", "friendly_name": "If value equal_to 1", "arguments": ["{{widgets.ConfirmDOB.Digits}}"], "value": "1"}], "event": "match", "next": "GatherFirstName"}], "type": "split-based-on", "name": "CheckConfirmDOB", "properties": {"input": "{{widgets.ConfirmDOB.Digits}}", "offset": {"y": 2720, "x": 1200}}}, {"transitions": [{"event": "keypress", "next": "CheckPhoneNumbeSplit"}, {"event": "speech"}, {"event": "timeout", "next": "CheckPhoneNumber"}], "type": "gather-input-on-call", "name": "CheckPhoneNumber", "properties": {"stop_gather": false, "language": "en-US", "gather_language": "en", "say": "Is this the best number to contact you?  {{widgets.getPhoneText.parsed.answer}} . Push 1 to confirm. Push 2 to change the number.", "number_of_digits": 1, "loop": 1, "timeout": 7, "offset": {"y": 3190, "x": 910}, "voice": "Polly.Matthew", "speech_timeout": "auto", "finish_on_key": "#", "profanity_filter": "true"}}, {"transitions": [{"event": "noMatch"}, {"conditions": [{"type": "equal_to", "friendly_name": "If value equal_to 1", "arguments": ["{{widgets.CheckPhoneNumber.Digits}}"], "value": "1"}], "event": "match", "next": "callApi"}, {"conditions": [{"type": "equal_to", "friendly_name": "If value equal_to 2", "arguments": ["{{widgets.CheckPhoneNumber.Digits}}"], "value": "2"}], "event": "match", "next": "NewPhoneNumber"}], "type": "split-based-on", "name": "CheckPhoneNumbeSplit", "properties": {"input": "{{widgets.CheckPhoneNumber.Digits}}", "offset": {"y": 3520, "x": 940}}}, {"transitions": [{"event": "keypress", "next": "setNewPhonenumber"}, {"event": "speech"}, {"event": "timeout", "next": "NewPhoneNumber"}], "type": "gather-input-on-call", "name": "NewPhoneNumber", "properties": {"stop_gather": true, "language": "en-US", "gather_language": "en", "say": "{{flow.variables.newPhoneNumberQuestion}}", "loop": 1, "timeout": 7, "offset": {"y": 3780, "x": 1230}, "voice": "Polly.Matthew", "speech_timeout": "auto", "finish_on_key": "#", "profanity_filter": "true"}}, {"transitions": [{"event": "next", "next": "getPhoneText"}], "type": "set-variables", "name": "setPhoneNumber", "properties": {"variables": [{"key": "contactPhoneNumber", "value": "{{trigger.call.From}}"}], "offset": {"y": 2930, "x": 900}}}, {"transitions": [{"event": "next", "next": "getPhoneText"}], "type": "set-variables", "name": "setNewPhonenumber", "properties": {"variables": [{"key": "contactPhoneNumber", "value": "{{widgets.NewPhoneNumber.Digits}}"}], "offset": {"y": 4190, "x": 1200}}}, {"transitions": [{"event": "success", "next": "CheckPhoneNumber"}, {"event": "failed"}], "type": "make-http-request", "name": "getPhoneText", "properties": {"url": "https://capture-data-9326.twil.io/phoneToText", "parameters": [{"key": "PhoneNumber", "value": "{{flow.variables.contactPhoneNumber}}"}], "method": "POST", "content_type": "application/x-www-form-urlencoded;charset=utf-8", "offset": {"y": 3080, "x": 1300}}}, {"transitions": [{"event": "next", "next": "GatherDateBirth"}], "type": "set-variables", "name": "setMonthSingleDigit", "properties": {"variables": [{"key": "inputMonth", "value": "0{{widgets.GatherMonthBirth.Digits}}"}], "offset": {"y": 1800, "x": 910}}}, {"transitions": [{"event": "next", "next": "GatherDateBirth"}], "type": "set-variables", "name": "setMonthNormalDigit", "properties": {"variables": [{"key": "inputMonth", "value": "{{widgets.GatherMonthBirth.Digits}}"}], "offset": {"y": 1560, "x": 880}}}, {"transitions": [{"event": "keypress", "next": "checkEnding"}, {"event": "speech"}, {"event": "timeout", "next": "EndingMessage"}], "type": "gather-input-on-call", "name": "EndingMessage", "properties": {"stop_gather": false, "language": "en-US", "gather_language": "en", "say": "{{flow.variables.endingMessage}}", "number_of_digits": 1, "loop": 1, "timeout": 7, "offset": {"y": 3660, "x": 260}, "voice": "Polly.Matthew", "speech_timeout": "auto", "finish_on_key": "#", "profanity_filter": "true"}}, {"transitions": [{"event": "noMatch", "next": "Thankyou"}, {"conditions": [{"type": "equal_to", "friendly_name": "If value equal_to 1", "arguments": ["{{widgets.EndingMessage.Digits}}"], "value": "1"}], "event": "match", "next": "Greeting"}], "type": "split-based-on", "name": "checkEnding", "properties": {"input": "{{widgets.EndingMessage.Digits}}", "offset": {"y": 3980, "x": 160}}}, {"transitions": [{"event": "noMatch", "next": "GatherMonthBirth"}, {"conditions": [{"type": "less_than", "friendly_name": "If value less_than 1000", "arguments": ["{{widgets.GatherYearBirth.Digits}}"], "value": "1000"}], "event": "match", "next": "GatherYearBirth"}], "type": "split-based-on", "name": "ValidYearCheck", "properties": {"input": "{{widgets.GatherYearBirth.Digits}}", "offset": {"y": 560, "x": 900}}}], "initial_state": "Trigger", "flags": {"allow_concurrent_calls": true}, "description": "A New Flow"}, "errors": [], "warnings": [], "date_updated": "2021-02-11T15:05:52Z", "friendly_name": "Voice IVR", "account_sid": "ACfd2cc646c68025ad80f5bc6191f9f673", "date_created": "2021-02-08T03:07:55Z", "url": "https://studio.twilio.com/v2/Flows/FW108a47c5b0bcd9ae0ea3517b841f31e6", "valid": true, "sid": "FW108a47c5b0bcd9ae0ea3517b841f31e6", "commit_message": "Published Flow", "webhook_url": "https://webhooks.twilio.com/v1/Accounts/ACfd2cc646c68025ad80f5bc6191f9f673/Flows/FW108a47c5b0bcd9ae0ea3517b841f31e6", "revision": 876, "links": {"test_users": "https://studio.twilio.com/v2/Flows/FW108a47c5b0bcd9ae0ea3517b841f31e6/TestUsers", "revisions": "https://studio.twilio.com/v2/Flows/FW108a47c5b0bcd9ae0ea3517b841f31e6/Revisions", "executions": "https://studio.twilio.com/v2/Flows/FW108a47c5b0bcd9ae0ea3517b841f31e6/Executions"}}